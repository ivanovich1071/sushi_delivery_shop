{% extends 'base.html' %}

{% block breadcrumbs %}
<div class="content__container">
    <div class="breadcrumbs">
        <a href="/">Главная</a>
        <span>/</span>
        <span>Меню</span>

        <form method="get" class="sort">
            <label for="sort">Сортировать по цене:</label>
            <select name="sort" id="sort">
                <option value="asc">По возрастанию</option>
                <option value="desc">По убыванию</option>
            </select>
            <button type="submit">Применить</button>
        </form>
    </div>
</div>
{% endblock breadcrumbs %}

{% block content %}
<div class="content__container">
    <div class="catalog__container">
        {% for product in products %}
        <div class="catalog__item">
            <a class="catalog__item__header" href="{% url 'product_detail' pk=product.pk %}">
                <h2>{{ product.name }}</h2>
            </a>

            <a class="catalog__item__photo__container" href="{% url 'product_detail' pk=product.pk %}">
                {% if product.image %}
                <img class="catalog__item__photo" src="{{product.image.url}}" alt="{{ product.name }}">
                {% endif %}
            </a>

            <div class="catalog__item__price">Цена: {{ product.price|floatformat:0 }} ₽</div>

            <!-- Добавлено описание продукта -->
            {% if product.description %}
            <div class="catalog__item__description">
                <p>{{ product.description }}</p>
            </div>
            {% endif %}

            <!-- Добавлена возможность ввода количества -->
            <form action="{% url 'cart:add_to_cart' product.pk %}" method="post">
                {% csrf_token %}
                <label for="quantity-{{ product.pk }}">Количество:</label>
                <input type="number" id="quantity-{{ product.pk }}" name="quantity" value="1" min="1">
                <button type="submit" class="btn btn-primary">Добавить в корзину</button>
            </form>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock content %}
